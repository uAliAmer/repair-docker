# ====================================
# Docker Compose Environment Variables
# ====================================
# Copy this file to .env and update with your actual values
# Never commit .env to version control!

# ====================================
# Backend API Configuration
# ====================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# ====================================
# Database Configuration (PostgreSQL)
# ====================================
# Main PostgreSQL credentials (for n8n)
POSTGRES_USER=n8n
POSTGRES_PASSWORD=supersecret
POSTGRES_DB=n8n

# Repair Tracker Database
REPAIR_DB_USER=repair_user
REPAIR_DB_PASSWORD=repair_secure_pass
REPAIR_DB_NAME=repair_tracker

# Full Database URL for Prisma
DATABASE_URL=postgresql://repair_user:repair_secure_pass@postgres:5432/repair_tracker?schema=public

# Evolution API Database
EVOLUTION_DB_USER=evolution
EVOLUTION_DB_PASSWORD=evolutionsecret
EVOLUTION_DB_NAME=evolution

# ====================================
# Authentication & Security
# ====================================
# IMPORTANT: Change this to a strong random string in production!
# Generate with: openssl rand -base64 32
JWT_SECRET=M7Niz1GdIz+Q02wZfOr3OYJjJ7+w8XFO+zkgr1PcBDo=
JWT_EXPIRES_IN=24h

# ====================================
# CORS Configuration
# ====================================
ALLOWED_ORIGINS=https://fix.nixflow.xyz,https://repair.nixflow.xyz

# ====================================
# File Upload Configuration
# ====================================
UPLOAD_DIR=/app/uploads
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/jpg

# ====================================
# n8n Webhook Integration
# ====================================
N8N_WEBHOOK_URL=https://n8n.nixflow.xyz/webhook/repair_update
N8N_ENABLED=true

# ====================================
# QR Code Generation
# ====================================
QR_CODE_BASE_URL=https://quickchart.io/qr

# ====================================
# Public Tracking URL
# ====================================
PUBLIC_TRACKING_URL=https://fix.nixflow.xyz/track

# ====================================
# Redis Cache (Optional)
# ====================================
REDIS_ENABLED=true
REDIS_URL=redis://redis:6379

# ====================================
# Rate Limiting
# ====================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ====================================
# Logging
# ====================================
LOG_LEVEL=info

# ====================================
# n8n Configuration
# ====================================
N8N_HOST=n8n.nixflow.xyz
N8N_PORT=5678
N8N_PROTOCOL=https
WEBHOOK_URL=https://n8n.nixflow.xyz/
GENERIC_TIMEZONE=Asia/Baghdad

# ====================================
# Evolution API Configuration
# ====================================
EVOLUTION_SERVER_URL=https://evolution.nixflow.xyz
EVOLUTION_API_KEY=GvhpMxOWF4a4cr11gsT1chf1NQ7HT5Ur
EVOLUTION_WEBHOOK_ENABLED=false

# ====================================
# SSL/TLS Configuration
# ====================================
# Domain names for SSL certificates
DOMAIN_REPAIR=fix.nixflow.xyz
DOMAIN_N8N=n8n.nixflow.xyz
DOMAIN_EVOLUTION=evolution.nixflow.xyz

# Email for Let's Encrypt notifications
LETSENCRYPT_EMAIL=admin@nixflow.xyz

# ====================================
# Container Configuration
# ====================================
# Container names (optional, already set in docker-compose.yml)
CONTAINER_BACKEND=repair-tracker-backend
CONTAINER_REDIS=repair-tracker-redis
CONTAINER_POSTGRES=repair-tracker-postgres
CONTAINER_NGINX=repair-tracker-nginx

# ====================================
# Volume Paths (relative to project root)
# ====================================
# These are managed by docker-compose.yml
POSTGRES_DATA_PATH=./postgres_data
REDIS_DATA_PATH=./redis_data
N8N_DATA_PATH=./n8n_data
EVOLUTION_DATA_PATH=./evolution_data
BACKEND_UPLOADS_PATH=./backend/uploads
BACKEND_LOGS_PATH=./backend/logs
NGINX_CONF_PATH=./nginx/conf
NGINX_SSL_PATH=./nginx/ssl
NGINX_CERTBOT_PATH=./nginx/certbot

# ====================================
# Port Mappings (Host:Container)
# ====================================
# Repair Tracker Backend
PORT_BACKEND=3000:3000

# PostgreSQL (exposed for development only - comment out in production)
PORT_POSTGRES=5432:5432

# Redis (exposed for development only - comment out in production)
PORT_REDIS=6379:6379

# n8n
PORT_N8N=5678:5678

# Evolution API
PORT_EVOLUTION=8080:8080

# Nginx
PORT_HTTP=80:80
PORT_HTTPS=443:443

# ====================================
# Health Check Configuration
# ====================================
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=5s
HEALTHCHECK_RETRIES=3
HEALTHCHECK_START_PERIOD=40s

# ====================================
# Resource Limits (Optional - Uncomment to enable)
# ====================================
# Backend
# BACKEND_MEMORY_LIMIT=512M
# BACKEND_CPUS=0.5

# PostgreSQL
# POSTGRES_MEMORY_LIMIT=1G
# POSTGRES_CPUS=1.0

# Redis
# REDIS_MEMORY_LIMIT=256M
# REDIS_CPUS=0.25

# ====================================
# Development Settings (Optional)
# ====================================
# Uncomment for development mode
# NODE_ENV=development
# LOG_LEVEL=debug
# REDIS_ENABLED=false

# ====================================
# Backup Configuration (Optional)
# ====================================
# BACKUP_ENABLED=true
# BACKUP_SCHEDULE=0 2 * * *
# BACKUP_RETENTION_DAYS=30
# BACKUP_PATH=./backups

# ====================================
# Monitoring (Optional - for future use)
# ====================================
# PROMETHEUS_ENABLED=false
# PROMETHEUS_PORT=9090
# GRAFANA_ENABLED=false
# GRAFANA_PORT=3001
